@page "/login"
@using OnlineCoursesPlatform.CLIENT.Services
@using OnlineCoursesPlatform.DTO.RequestDTO
@inject IAuthService AuthService
@inject NavigationManager NavigationManager

@code {
    private LoginRequestDTO loginRequest = new LoginRequestDTO();
    private bool rememberMe = false;
    private string errorMessage = string.Empty;

    private async Task HandleLogin()
    {
        var response = await AuthService.Login(loginRequest);
        if (response.IsSuccessStatusCode)
        {
            NavigationManager.NavigateTo("/");
        }
        else
        {
            errorMessage = "Invalid credentials. Please try again.";
        }
    }

    private void ToggleRememberMe()
    {
        rememberMe = !rememberMe;
    }
}

<div class="login-page-container">
    <div class="login-page-form">
        <OnlineCoursesPlatform.CLIENT.Components.LoginForm 
            OnSubmit="HandleLogin" 
            RememberMe="rememberMe" 
            OnToggleRememberMe="ToggleRememberMe" 
        />
    </div>
</div>